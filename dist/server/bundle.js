!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-chartkick")},function(e,t){e.exports={user:process.env.NODE_ORACLEDB_USER||"ben",password:process.env.NODE_ORACLEDB_PASSWORD||"welcome1",connectString:process.env.NODE_ORACLEDB_CONNECTIONSTRING||"10.2.252.102/BPMDB.local",externalAuth:process.env.NODE_ORACLEDB_EXTERNALAUTH=!0}},function(e,t){e.exports=require("oracledb")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("chart.js")},function(e,t,n){var r=n(11),a=n(13);"string"==typeof r&&(r=[[e.i,r,""]]),e.exports=r.locals||{},e.exports._getContent=function(){return r},e.exports._getCss=function(){return r.toString()},e.exports._insertCss=function(e){return a(r,e)}},function(e,t,n){(e.exports=n(12)(!1)).push([e.i,"\n\nsection.hero {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));\n  grid-gap: 2rem;\n}\n\n .hero {\n   width: 100%;\n   color: #333;\n   text-align: center;\n }\n\n .title {\n   margin: 0;\n   width: 100%;\n   padding-top: 80px;\n   line-height: 1.15;\n   font-size: 48px;\n }\n\n .title,\n .description {\n   text-align: center;\n }\n\n .row {\n   max-width: 880px;\n   margin: 80px auto 40px;\n   display: flex;\n   flex-direction: row;\n   justify-content: space-around;\n }\n\n .card {\n   padding: 18px 18px 24px;\n   width: 220px;\n   text-align: left;\n   text-decoration: none;\n   color: #434343;\n   border: 1px solid #9b9b9b;\n }\n\n .card:hover {\n   border-color: #067df7;\n }\n\n .card h3 {\n   margin: 0;\n   color: #067df7;\n   font-size: 18px;\n }\n\n .card p {\n   margin: 0;\n   padding: 12px 0 0;\n   font-size: 13px;\n   color: #333;\n }\n\n h1, h3{\n   text-transform: uppercase;\n }\n\n article{\n   align-items: center;\n   text-align: center;\n  background: rgba(230, 227, 227, .5);\n  padding: 1rem;\n }\n\n #chartPage{\n   text-align: center;\n   text-transform: uppercase;\n }\n\n .text-right{\n   text-align: right;\n }\n\n section{\n   margin: 2rem 0px;\n   text-align: center;\n   display: grid;\n   align-items: center;\n }\n\n td{\n   min-width: 7rem;\n   padding: 1rem;\n   border: 1px solid black;\n }\n\n",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a=(u=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(u))))+" */"),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([a]).join("\n")}var u;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(r[o]=!0)}for(a=0;a<e.length;a++){var u=e[a];"number"==typeof u[0]&&r[u[0]]||(n&&!u[2]?u[2]=n:n&&(u[2]="("+u[2]+") and ("+n+")"),t.push(u))}},t}},function(e,t,n){"use strict";var r=o(n(14)),a=o(n(15));function o(e){return e&&e.__esModule?e:{default:e}}var u="s",c={};e.exports=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.replace,i=void 0!==o&&o,s=n.prepend,l=void 0!==s&&s,d=[],p=0;p<e.length;p++){var f=(0,a.default)(e[p],4),m=f[0],b=f[1],h=f[2],y=f[3],D=m+"-"+p;if(d.push(D),!c[D]||i){c[D]=1;var g=document.getElementById(u+D),v=!1;g||(v=!0,(g=document.createElement("style")).setAttribute("type","text/css"),g.id=u+D,h&&g.setAttribute("media",h));var x=b;y&&"function"==typeof btoa&&(x+="\n/*# sourceMappingURL=data:application/json;base64,"+(t=(0,r.default)(y),btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)})))+"*/",x+="\n/*# sourceURL="+y.file+"?"+D+"*/"),"textContent"in g?g.textContent=x:g.styleSheet.cssText=x,v&&(l?document.head.insertBefore(g,document.head.childNodes[0]):document.head.appendChild(g))}else c[D]++}return function(e){e.forEach(function(e){if(--c[e]<=0){var t=document.getElementById(u+e);t&&t.parentNode.removeChild(t)}})}.bind(null,d)}},function(e,t){e.exports=require("babel-runtime/core-js/json/stringify")},function(e,t){e.exports=require("babel-runtime/helpers/slicedToArray")},function(e,t){e.exports=require("dotenv")},function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),o=n(6),u=n.n(o),c=n(3),i=n.n(c),s=n(0),l=n.n(s),d=n(4),p=n.n(d),f=n(7),m=n.n(f),b=n(2),h=n.n(b),y=n(8),D=n.n(y),g=(n(10),n(1)),v=n.n(g),x=n(9),S=n.n(x);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}v.a.addAdapter(S.a);var q=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];return r=this,a=(e=O(t)).call.apply(e,[this].concat(u)),n=!a||"object"!==E(a)&&"function"!=typeof a?P(r):a,C(P(n),"state",{processData:[{requestedAmount:3872368.42,requestDate:"23/JAN/2019",dueDate:"1/FEB/2019",dayPastDue:12,explanation:"D/F&A 06/2/2019 Overhead at 11/2/2019"},{requestedAmount:31218749.41,requestDate:"29/JAN/2019",dueDate:"9/FEB/2019",dayPastDue:13,explanation:"D/F&A 06/2/2019 Overhead at 11/2/2019"},{requestedAmount:3872368.42,requestDate:"18/FEB/2019",dueDate:"12/FEB/2019",dayPastDue:30,explanation:"D/F&A 06/2/2019 Overhead at 11/2/2019"},{requestedAmount:3872368.42,requestDate:"12/MAR/2019",dueDate:"28/FEB/2019",dayPastDue:21,explanation:"D/F&A 06/2/2019 Overhead at 11/2/2019"}],currentYearContractSum:[["Works",16],["Services",45],["Goods",26],["SPD",7],["Job Order (General)",3],["Job Order (Motors)",3]],currentYearSpendAreas:[{name:"Total Awards",data:{"Job Order (Motor Vehicle)":968,"Job Order (General)":786,SPD:136,Goods:135,Services:783,Works:37}},{name:"Total Completed",data:{"Job Order (Motor Vehicle)":364,"Job Order (General)":480,SPD:118,Goods:91,Services:109,Works:16}},{name:"Ongoing",data:{"Job Order (Motor Vehicle)":604,"Job Order (General)":303,SPD:18,Goods:44,Services:674,Works:21}}],liabilitiesInSpendAreas:[],fecAwardedProjectsCurrentLiabilities:[],contractAwardedForYears:[{name:"2016",data:{"Job Order (Motor Vehicle)":968,"Job Order (General)":786,SPD:136,Goods:135,Services:783,Works:37}},{name:"2017",data:{"Job Order (Motor Vehicle)":364,"Job Order (General)":480,SPD:118,Goods:91,Services:109,Works:16}},{name:"2018",data:{"Job Order (Motor Vehicle)":604,"Job Order (General)":303,SPD:18,Goods:44,Services:674,Works:21}}],yearsContractSumVariousSpend:[{name:"Job Order (Motor Vehicle)",data:{2016:968,2017:786,2018:136}},{name:"Job Order (General)",data:{2016:364,2017:480,2018:118}},{name:"SPD",data:{2016:968,2017:786,2018:136}},{name:"Goods",data:{2016:968,2017:786,2018:136}},{name:"Services",data:{2016:968,2017:786,2018:136}},{name:"Works",data:{2016:968,2017:786,2018:136}}]}),C(P(n),"changeSort",function(e){var t=n.state.processData;switch(e){case"IPC Sum desc":t.sort(function(e,t){return e.requestedAmount>t.requestedAmount?-1:e.requestedAmount<t.requestedAmount?1:0});break;case"IPC Sum asc":t.sort(function(e,t){return e.requestedAmount>t.requestedAmount?1:e.requestedAmount<t.requestedAmount?-1:0});break;case"Date raised desc":t.sort(function(e,t){return new Date(e.requestDate)>new Date(t.requestDate)?-1:new Date(e.requestDate)<new Date(t.requestDate)?1:0});break;case"Date raised asc":t.sort(function(e,t){return new Date(e.requestDate)>new Date(t.requestDate)?1:new Date(e.requestDate)<new Date(t.requestDate)?-1:0});break;case"Due Date desc":t.sort(function(e,t){return new Date(e.dueDate)>new Date(t.dueDate)?-1:new Date(e.dueDate)<new Date(t.dueDate)?1:0});break;case"Due Date asc":t.sort(function(e,t){return new Date(e.dueDate)>new Date(t.dueDate)?1:new Date(e.dueDate)<new Date(t.dueDate)?-1:0});break;default:t.sort(function(e,t){return new Date(e.dayPastDue)>new Date(t.dayPastDue)?-1:new Date(e.dayPastDue)<new Date(t.dayPastDue)?1:0})}n.setState({processData:t})}),C(P(n),"renderTableReport",function(){return n.state.processData.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,t+1),l.a.createElement("td",null,"N ",e.requestedAmount),l.a.createElement("td",null,e.requestDate),l.a.createElement("td",null,e.dueDate),l.a.createElement("td",null,e.dayPastDue),l.a.createElement("td",null,e.explanation))})}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,s["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){D.a.get("/api").then(function(e){console.log(e)}).catch(function(e){console.log(e.response)});var e=this.state.processData;e.sort(function(e,t){return e.dayPastDue>t.dayPastDue?-1:e.dayPastDue<t.dayPastDue?1:0}),this.setState({processData:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentYearContractSum,r=t.currentYearSpendAreas,a=t.contractAwardedForYears,o=t.yearsContractSumVariousSpend;return l.a.createElement("div",{id:"chartPage"},l.a.createElement("h1",null,"Graphic Analysis of 2018 FIRS Procurement Data"),l.a.createElement("section",{className:"hero"},l.a.createElement("article",null,l.a.createElement("h3",null,"2018 Procurement Award by Contract Sum"),l.a.createElement(g.PieChart,{data:n,suffix:"%",legend:"right"})),l.a.createElement("article",{className:"chart"},l.a.createElement("h3",null,"2018 Award in various spend areas"),l.a.createElement(g.BarChart,{data:r,height:300,legend:"bottom"})),l.a.createElement("article",{className:"chart"},l.a.createElement("h3",null,"Contract Awarded for Years 2016, 2017, 2018"),l.a.createElement(g.ColumnChart,{data:a,height:300,legend:"bottom"})),l.a.createElement("article",{className:"chart"},l.a.createElement("h3",null,"Total Contract Sum with various spend areas for year 2016, 2017, 2018"),l.a.createElement(g.BarChart,{data:o,height:300,legend:"bottom",prefix:"N",suffix:".00"}))),l.a.createElement("section",null,l.a.createElement("div",{className:"text-right"},l.a.createElement("select",{onChange:function(t){return e.changeSort(t.target.value)}},l.a.createElement("option",null,"IPC Sum desc"),l.a.createElement("option",null,"IPC Sum asc"),l.a.createElement("option",null,"Date raised desc"),l.a.createElement("option",null,"Date raised asc"),l.a.createElement("option",null,"Due Date desc"),l.a.createElement("option",null,"Due Date asc"))),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"S/No"),l.a.createElement("th",null,"IPC Sum"),l.a.createElement("th",null,"Date Requested"),l.a.createElement("th",null,"Due Date for Payment"),l.a.createElement("th",null,"Days Past Due"),l.a.createElement("th",null,"Explanation"))),l.a.createElement("tbody",null,this.renderTableReport()))))}}])&&w(n.prototype,r),a&&w(n,a),t}();function T(e,t,n,r,a,o,u){try{var c=e[o](u),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}n(16).config(),i.a.outFormat=i.a.OBJECT;var _=process.env.PORT||3008,j=p()();j.use(p.a.static("./build")),j.get("/api",function(e,t){try{console.log(h.a),i.a.getConnection({user:h.a.user,password:h.a.password,connectString:h.a.connectString}).then(function(){var e,n=(e=regeneratorRuntime.mark(function e(n){var r,a,o,u,c,i,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),"select contractSubType, count(contractSubType) from reports_vendor group by contractSubType",r="select contractSubType, paymentType, count(contractSubType) from reports_vendor group by contractSubType group by paymentType",a='select contractSubType, trunc(requestDate, "Year") from reports_vendor group by contractSubType group by trunc(requestDate, "Year")',e.next=6,n.execute("select contractSubType, count(contractSubType) from reports_vendor group by contractSubType");case 6:return o=e.sent,e.next=9,n.execute(r);case 9:return u=e.sent,c=[],i=[],e.next=14,n.execute(a);case 14:s=e.sent,l=[],t.json({currentYearContractSum:o,currentYearSpendAreas:u,liabilitiesInSpendAreas:c,fecAwardedProjectsCurrentLiabilities:i,contractAwardedForYears:s,yearsContractSumVariousSpend:l});case 17:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function u(e){T(o,r,a,u,c,"next",e)}function c(e){T(o,r,a,u,c,"throw",e)}u(void 0)})});return function(e){return n.apply(this,arguments)}}()).catch(function(e){console.log(e),t.status(500).json({err:e})})}catch(e){console.log(e)}}),j.get("/*",function(e,t){var n=m.a.renderToString(l.a.createElement(q,null)),r=a.a.resolve("./build/index.html");u.a.readFile(r,"utf8",function(e,r){return e?(console.error("Something went wrong:",e),t.status(500).send("Oops, better luck next time!")):t.send(r.replace('<div id="root"></div>','<div id="root">'.concat(n,"</div>")))})}),j.listen(_,function(){console.log("😎 Server is listening on port ".concat(_))})}]);